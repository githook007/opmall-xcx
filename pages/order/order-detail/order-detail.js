(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order-detail/order-detail"],{"57b3":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o("2f62");function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(o,!0).forEach(function(t){a(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s=function(){return o.e("components/page-component/app-order-goods-info/app-order-goods-info").then(o.bind(null,"1602"))},d=function(){return o.e("components/page-component/app-order-express/app-order-express").then(o.bind(null,"2338"))},c=function(){return o.e("components/page-component/app-order-banner/app-order-banner").then(o.bind(null,"ccb8"))},l={components:{"app-order-goods-info":s,"app-order-express":d,"app-order-banner":c},data:function(){return{order_id:null,orderDetail:{detailExpressRelation:[],detailExpress:[]},is_show:!1,advance_order:{goods_num:0},detail:[],sign:"",ecard:[],isShowFormGoods:!1,invoiceType:null}},computed:i({formList:function(){var e=this,t=e.orderDetail.detail,o={},r=[];if(t&&t.length){var n=!0,i=!1,a=void 0;try{for(var s,d=t[Symbol.iterator]();!(n=(s=d.next()).done);n=!0){var c=s.value;"0"!=c.form_id&&(-1===r.indexOf(c.form_id)?(r.push(c.form_id),o[c.form_id]=[c]):o[c.form_id].push(c))}}catch(l){i=!0,a=l}finally{try{n||null==d.return||d.return()}finally{if(i)throw a}}}return e.isShowFormGoods=r.length>1,Object.values(o)},getPageUrl:function(){var e=this.orderDetail;if(1==e.is_send&&0==e.detailExpress.length){var t="";return e.detail.forEach(function(e,o){0===o&&(t=e.goods_info.pic_url)}),"/pages/order/express-detail/express-detail?express=".concat(e.express,"&customer_name=").concat(e.customer_name,"&express_no=").concat(e.express_no,"&cover_pic=").concat(t)}if(1==e.is_send&&1==e.detailExpress.length){var o=e.detailExpress[0].express,r=e.detailExpress[0].express_no,n=e.detailExpress[0].customer_name,i=e.detailExpress[0].expressRelation[0].orderDetail.goods_info.goods_attr.cover_pic;return"/pages/order/express-detail/express-detail?express="+o+"&customer_name="+n+"&express_no="+r+"&cover_pic="+i}if(e.detailExpress.length>=1)return"/pages/order/express-list/express-list?order_id="+e.id}},(0,r.mapState)({appConfig:function(e){return e.mallConfig}})),methods:{customer:function(e){1==this.appConfig.mall.setting.web_service_type?(console.log("=11"),this.router("/pages/web/web?url="+encodeURIComponent(e.web_service_url))):2==this.appConfig.mall.setting.web_service_type&&(console.log("=22"),wx.openCustomerServiceChat({extInfo:{url:decodeURIComponent(this.appConfig.mall.setting.web_service_url)},corpId:this.appConfig.mall.setting.enterprise_wechat_id,success:function(e){console.log(e)},fail:function(e){console.log(e)}}))},makePhoneCall:function(){e.makePhoneCall({phoneNumber:this.orderDetail.web_mobile})},look:function(t){e.previewImage({current:t,urls:[t]})},toggle:function(e){this.orderDetail.composition_list[e].show=!this.orderDetail.composition_list[e].show,this.$forceUpdate()},getOrderDetail:function(){var t=this;t.$showLoading(),t.$request({url:t.$api.order.detail,data:{id:t.order_id}}).then(function(o){if(t.$hideLoading(),t.is_show=!0,0==o.code){if(t.orderDetail=o.data.detail,t.ecard=[t.orderDetail.type_data.ecard[0]],"composition"==t.sign)for(var r in t.orderDetail.composition_list)t.orderDetail.composition_list[r].show=!1}else e.showModal({title:"",content:o.msg,showCancel:!1})}).catch(function(){t.$hideLoading()})},copyText:function(t){this.$utils.uniCopy({data:t,success:function(){e.showToast({title:"复制成功",icon:"none"})}})},copyTextEcard:function(t){var o="";o+="".concat(t,"\n"),this.$utils.uniCopy({data:o,success:function(){e.showToast({title:"复制成功",icon:"none"})}})},navigation:function(t){e.openLocation({latitude:parseFloat(t.latitude),longitude:parseFloat(t.longitude),name:t.name,address:t.address})},invoiceTo:function(t){e.navigateTo({url:"/plugins/invoice/detail/detail?orderId="+t}),console.log(t,"orderId")},cancel:function(t){e.navigateTo({url:"/pages/order/refund/order-refund?id="+t.id})},cancelAction:function(t){var o=this;e.showLoading({title:"取消中"}),o.$request({url:o.$api.order.cancel,data:{id:t.id}}).then(function(t){e.hideLoading(),0===t.code?"advance"===o.sign?o.$request({url:o.$api.advance.order_detail,method:"get",data:{id:o.order_id}}).then(function(t){o.is_show=!0,0===t.code?o.orderDetail=t.data.detail:e.showModal({title:"",content:t.msg,showCancel:!1})}):o.getOrderDetail():e.showModal({title:"",content:t.msg,showCancel:!1})}).catch(function(){e.hideLoading()})},mobile:function(){e.makePhoneCall({phoneNumber:this.orderDetail.city.mobile})},go_eCard:function(){e.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.ecard.index),"&key=content&data=").concat(JSON.stringify({order_id:this.orderDetail.id}))})}},onLoad:function(e){this.$commonLoad.onload(e),this.invoiceType=this.appConfig.invoice,this.order_id=e.id,this.sign=e.sign},onShow:function(){var t=this,o=setInterval(function(){"advance"===t.sign?t.$request({url:t.$api.advance.order_detail,method:"get",data:{id:t.order_id}}).then(function(o){t.is_show=!0,0===o.code?t.orderDetail=o.data.detail:e.showModal({title:"",content:o.msg,showCancel:!1})}):t.getOrderDetail(),clearInterval(o)},300)}};t.default=l}).call(this,o("543d")["default"])},"581e":function(e,t,o){"use strict";o.r(t);var r=o("a38d"),n=o("6b22");for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);o("680a");var a=o("2877"),s=Object(a["a"])(n["default"],r["a"],r["b"],!1,null,"f1573e2a",null);t["default"]=s.exports},"680a":function(e,t,o){"use strict";o("a32f")},"6b22":function(e,t,o){"use strict";o.r(t);var r=o("57b3"),n=o.n(r);for(var i in r)"default"!==i&&function(e){o.d(t,e,function(){return r[e]})}(i);t["default"]=n.a},a32f:function(e,t,o){},a38d:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.__map(e.orderDetail.order_form,function(t,o){var r=Array.isArray(t.value);return{$orig:e.__get_orig(t),g0:r}})),r=e.__map(e.formList,function(t,o){var r=e.__map(t[0]["form_data"],function(t,o){var r=Array.isArray(t.value);return{$orig:e.__get_orig(t),g1:r}});return{$orig:e.__get_orig(t),l1:r}});e._isMounted||(e.e0=function(t){e.ecard=e.orderDetail.type_data.ecard}),e.$mp.data=Object.assign({},{$root:{l0:o,l2:r}})},n=[];o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n})}},[["4eb93","common/runtime","common/vendor"]]]);